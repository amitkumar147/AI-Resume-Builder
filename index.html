<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Resume Builder (Advanced)</title>

<!-- PDF LIBRARIES -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
    body {
        margin: 0;
        padding: 0;
        background: #0e0f11;
        color: #fff;
        font-family: Poppins, sans-serif;
        display: flex;
        height: 100vh;
        overflow: hidden;
    }

    .left {
        width: 40%;
        background: #131417;
        padding: 25px;
        overflow-y: scroll;
        border-right: 1px solid #2a2a2a;
    }

    h2 { margin-bottom: 5px; font-weight: 600; }

    input, textarea {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        background: #1d1e22;
        border: 1px solid #444;
        color: #fff;
        border-radius: 10px;
    }

    textarea { height: 100px; resize: none; }

    .btn {
        width: 100%;
        padding: 12px;
        background: #00d4ff;
        border: none;
        border-radius: 10px;
        color: #000;
        font-size: 16px;
        margin-top: 10px;
        cursor: pointer;
        font-weight: bold;
        transition: 0.2s;
    }

    .right {
        width: 60%;
        padding: 30px;
        overflow-y: scroll;
        background: #f8f8f8;
        color: #000;
    }

    .resume-box {
        width: 90%;
        margin: auto;
        padding: 20px;
        background: #fff;
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(0,0,0,0.15);
    }

    .logo { width: 0px; margin-bottom: 15px; }

    #profile-pic {
        width: 110px;
        height: 110px;
        border-radius: 100%;
        object-fit: cover;
        border: 3px solid #00d4ff;
    }

    .section-title {
        font-weight: 700;
        font-size: 20px;
        margin-top: 20px;
        border-left: 5px solid #00d4ff;
        padding-left: 10px;
    }
</style>
</head>

<body>

<!-- LEFT PANEL -->
<div class="left">
    <h2>AI Resume Builder</h2>

    <label>Name</label>
    <input id="name">

    <label>Email</label>
    <input id="email">

    <label>Phone</label>
    <input id="phone">

    <label>Summary</label>
    <textarea id="summary"></textarea>

    <label>Skills</label>
    <input id="skills">

    <label>Experience</label>
    <textarea id="exp"></textarea>

    <label>Projects</label>
    <textarea id="projects"></textarea>

    <label>Upload Photo</label>
    <input id="pic" type="file" accept="image/*">

    <button class="btn" onclick="generate()">Generate Resume</button>
    <button class="btn" onclick="downloadPDF()">Download PDF</button>
</div>

<!-- RIGHT PREVIEW -->
<div class="right">
    <div class="resume-box" id="resumePreview">
        <img src="assets/logo.png" class="logo">

        <img id="profile-pic" src="">
        <h1 id="r-name">Your Name</h1>
        <p id="r-email"></p>
        <p id="r-phone"></p>

        <div class="section-title">Summary</div>
        <p id="r-summary"></p>

        <div class="section-title">Skills</div>
        <p id="r-skills"></p>

        <div class="section-title">Experience</div>
        <p id="r-exp"></p>

        <div class="section-title">Projects</div>
        <p id="r-projects"></p>
    </div>
</div>



<script>
    /* PROFILE IMAGE PREVIEW */
    document.getElementById("pic").addEventListener("change", e => {
        const file = e.target.files[0];
        document.getElementById("profile-pic").src = URL.createObjectURL(file);
    });

    /* AUTO FILL RESUME */
    function generate() {
        const f = id => document.getElementById(id).value;

        document.getElementById("r-name").innerText = f("name");
        document.getElementById("r-email").innerText = f("email");
        document.getElementById("r-phone").innerText = f("phone");
        document.getElementById("r-summary").innerText = f("summary");
        document.getElementById("r-skills").innerText = f("skills");
        document.getElementById("r-exp").innerText = f("exp");
        document.getElementById("r-projects").innerText = f("projects");
    }

    /* ACODE-COMPATIBLE PDF DOWNLOAD */
    async function downloadPDF() {
        const { jsPDF } = window.jspdf;

        const element = document.getElementById("resumePreview");

        const canvas = await html2canvas(element, { scale: 2 });
        const imgData = canvas.toDataURL("image/png");

        const pdf = new jsPDF("p", "mm", "a4");
        const width = pdf.internal.pageSize.getWidth();
        const height = (canvas.height * width) / canvas.width;

        pdf.addImage(imgData, "PNG", 0, 0, width, height);

        const pdfBase64 = pdf.output("datauristring");

        // Forced download (Acode compatible)
        const link = document.createElement("a");
        link.href = pdfBase64;
        link.download = "resume.pdf";
        link.click();
    }
</script>

</body>
</html>